!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).version=e()}(this,(function(){"use strict";class t{constructor(){this.namespace="",this.data={},this.existingProxy=[]}init(t){if(!t)throw new Error("请传入命名空间");this.namespace=t}set(e,s){if(s&&function(e){const s=new t;return Object.keys(s).includes(e)}(s))return void console.error(s+"是数据仓库的关键字，请更改命名空间");if("object"==typeof(a=e)&&null!==a)return void console.error("设置的数据必须是一个对象");var a;const i=s||this.namespace;let n=this.data[i]||{};this.data[i]=Object.assign(n,e,{_spacename:i});for(let t in e)this.proxyOfprototype(e,i,t);this.data[i]=this.proxyOfcontent}get(t,e){return!t&&e?this.data[this.namespace]:t&&!e&&this.data[this.namespace]&&void 0!==this.data[this.namespace][t]?this.data[this.namespace][t]:e&&t&&this.data[e]?this.data[e][t]:void 0}clear(){if(!this.data[this.namespace])return;Object.keys(this.data[this.namespace]).forEach(t=>{"spacename"!==t&&delete this[t]}),this.data[this.namespace]=null}proxyOfprototype(t,e,s){if("_spacename"===s)return;console.log(t);const a=e||this.namespace,i={get:()=>this.data[a][s],set:t=>{this.data[s]=t,this.data[a][s]=t},enumerable:!0,configurable:!0};Object.defineProperty(this,s,i)}proxyOfcontent(t){if(this.existingProxy.includes(t))return this.data[t];let e=new Proxy(this.data[t],{get:(t,e,s)=>Reflect.get(t,e,s),set:(t,e,s,a)=>{const i=t[e];if(t._spacename!==this.namespace&&"global"!==t._spacename)return console.error("不允许修改其他数据仓库的数据"),i;return Reflect.set(t,e,s,a)}});return this.existingProxy.push(t),e}}return console.log("databnase改变了最终版444"),t}));
//# sourceMappingURL=finoer-store.umd.min.js.map
